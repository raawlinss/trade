<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RAWLINS - Trading Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body class="min-h-screen light-mode fade-in-page">
  <div class="container mx-auto px-6 py-12">
    <div class="text-center mb-12 relative">
      <div class="absolute left-0 top-0">
        <button id="darkModeToggle" class="btn btn-dark-toggle" style="min-width:48px;min-height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1001;position:relative;pointer-events:auto;">
          <span id="modeIcon" class="text-xl">üåô</span>
        </button>
      </div>

      <div class="absolute right-0 top-0 language-selector" style="z-index:2000;">
        <div class="relative">
          <button id="languageDropdown" class="btn btn-language" style="min-width:120px;min-height:48px;cursor:pointer;z-index:2001;position:relative;pointer-events:auto;">
            <img id="currentFlag" src="https://flagcdn.com/us.svg" alt="Flag" class="w-5 h-4 rounded-sm" onerror="this.src='';this.alt='Flag failed to load';this.style.display='none';" />
            <span id="currentLanguage">English</span>
            <svg class="w-4 h-4 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div id="languageMenu" class="absolute right-0 top-full mt-2 card rounded-lg shadow-lg border hidden min-w-48 blur-to-sharp" style="z-index:99999;">
            <div class="py-2 max-h-64 overflow-y-auto">
              <div class="language-option" data-lang="en" data-flag="us" data-name="English">
                <img src="https://flagcdn.com/us.svg" alt="US Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">English</span>
              </div>
              <div class="language-option" data-lang="tr" data-flag="tr" data-name="T√ºrk√ße">
                <img src="https://flagcdn.com/tr.svg" alt="TR Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">T√ºrk√ße</span>
              </div>
              <div class="language-option" data-lang="es" data-flag="es" data-name="Espa√±ol">
                <img src="https://flagcdn.com/es.svg" alt="ES Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Espa√±ol</span>
              </div>
              <div class="language-option" data-lang="ru" data-flag="ru" data-name="–†—É—Å—Å–∫–∏–π">
                <img src="https://flagcdn.com/ru.svg" alt="RU Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">–†—É—Å—Å–∫–∏–π</span>
              </div>
              <div class="language-option" data-lang="zh" data-flag="cn" data-name="‰∏≠Êñá">
                <img src="https://flagcdn.com/cn.svg" alt="CN Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">‰∏≠Êñá</span>
              </div>
              <div class="language-option" data-lang="az" data-flag="az" data-name="Az…ôrbaycan">
                <img src="https://flagcdn.com/az.svg" alt="AZ Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Az…ôrbaycan</span>
              </div>
              <div class="language-option" data-lang="pt" data-flag="pt" data-name="Portugu√™s">
                <img src="https://flagcdn.com/pt.svg" alt="PT Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Portugu√™s</span>
              </div>
              <div class="language-option" data-lang="ja" data-flag="jp" data-name="Êó•Êú¨Ë™û">
                <img src="https://flagcdn.com/jp.svg" alt="JP Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Êó•Êú¨Ë™û</span>
              </div>
              <div class="language-option" data-lang="de" data-flag="de" data-name="Deutsch">
                <img src="https://flagcdn.com/de.svg" alt="DE Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Deutsch</span>
              </div>
              <div class="language-option" data-lang="fr" data-flag="fr" data-name="Fran√ßais">
                <img src="https://flagcdn.com/fr.svg" alt="FR Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Fran√ßais</span>
              </div>
              <div class="language-option" data-lang="it" data-flag="it" data-name="Italiano">
                <img src="https://flagcdn.com/it.svg" alt="IT Flag" class="w-6 h-4 rounded-sm shadow-sm" />
                <span class="font-medium">Italiano</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h1 class="text-3xl font-semibold text-primary mb-2 header-title">RAWLINS</h1>
        <p class="text-secondary header-subtitle" data-translate="subtitle">Professional Trading Analytics</p>
        <div class="text-xs text-secondary mt-1 opacity-60 header-version">Time is Money</div>
      </div>
    </div>

    <div class="flex justify-center mb-8 tab-navigation">
      <div class="card rounded-lg p-1 flex flex-row space-x-1">
        <button id="winRateTab" class="btn btn-tab active" data-translate="winRateTab">Win Rate Calculator</button>
        <button id="leverageTab" class="btn btn-tab" data-translate="leverageTab">Leverage Calculator</button>
      </div>
    </div>

    <div id="winRateSection" class="max-w-4xl mx-auto tab-transition">
      <div class="card card-slide-left rounded-lg p-6">
        <h2 class="text-lg font-medium text-primary mb-6 text-center" data-translate="winRateTitle">Win Rate Calculator</h2>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <div class="input-animated" style="animation-delay:0.1s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="startingBalance">Starting Balance (USD)</label>
              <input type="number" id="startingBalance" class="w-full px-3 py-2 input rounded-lg" placeholder="10000" value="10000" />
            </div>

            <div class="input-animated" style="animation-delay:0.2s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="takeProfit">Take Profit (%)</label>
              <input type="number" id="takeProfit" class="w-full px-3 py-2 input rounded-lg" placeholder="2" value="2" step="0.1" />
            </div>

            <div class="input-animated" style="animation-delay:0.3s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="stopLoss">Stop Loss (%)</label>
              <input type="number" id="stopLoss" class="w-full px-3 py-2 input rounded-lg" placeholder="1" value="1" step="0.1" />
            </div>

            <div class="input-animated" style="animation-delay:0.4s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="winRate">Win Rate (%)</label>
              <input type="number" id="winRate" class="w-full px-3 py-2 input rounded-lg" placeholder="65" value="65" min="0" max="100" step="0.1" />
            </div>

            <div class="input-animated" style="animation-delay:0.5s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="numberOfTrades">Number of Trades</label>
              <input type="number" id="numberOfTrades" class="w-full px-3 py-2 input rounded-lg" placeholder="100" value="100" />
            </div>

            <div class="input-animated" style="animation-delay:0.6s;">
              <label class="block text-sm font-medium text-primary mb-2" data-translate="leverage">Leverage</label>
              <select id="leverage" class="w-full px-3 py-2 input rounded-lg">
                <option value="1" selected>1x</option>
                <option value="2">2x</option>
                <option value="5">5x</option>
                <option value="10">10x</option>
                <option value="20">20x</option>
                <option value="50">50x</option>
                <option value="100">100x</option>
              </select>
            </div>

            <div class="btn-animated" style="animation-delay:0.7s;">
              <button id="runStrategy" class="btn btn-primary w-full" data-translate="calculateStrategy">Calculate Strategy</button>
            </div>
          </div>

          <div id="results" class="card card-slide-right rounded-lg p-4 hidden">
            <h3 class="text-base font-medium text-primary mb-4" data-translate="results">Results</h3>
            <div class="space-y-2">
              <div class="flex justify-between items-center p-2 card rounded border result-item">
                <span class="text-secondary text-sm" data-translate="riskReward">Risk/Reward Ratio:</span>
                <span id="riskReward" class="font-medium text-info">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border result-item">
                <span class="text-secondary text-sm" data-translate="totalPL">Total P&L:</span>
                <span id="totalProfitLoss" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border result-item">
                <span class="text-secondary text-sm" data-translate="winningTrades">Winning Trades:</span>
                <span id="winningTrades" class="font-medium text-success">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border result-item">
                <span class="text-secondary text-sm" data-translate="losingTrades">Losing Trades:</span>
                <span id="losingTrades" class="font-medium text-danger">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border result-item">
                <span class="text-secondary text-sm" data-translate="netProfitRate">Net Profit Rate:</span>
                <span id="netProfitRate" class="font-medium text-info">-</span>
              </div>
              <div class="flex justify-between items-center p-2 bg-info-light rounded border result-item">
                <span class="text-primary font-medium text-sm" data-translate="finalBalance">Final Balance:</span>
                <span id="finalBalance" class="font-medium text-info">-</span>
              </div>
            </div>

            <div id="aiAnalysis" class="mt-6 card ai-gradient rounded-lg p-4 hidden">
              <div class="flex items-center justify-between mb-3">
                <h4 class="text-white font-medium flex items-center gap-2">ü§ñ <span data-translate="aiAnalysis">AI Strategy Analysis</span></h4>
                <div id="aiLoadingSpinner" class="hidden">
                  <div class="animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"></div>
                </div>
              </div>
              <div id="aiAnalysisContent" class="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
                <div id="aiAnalysisText" class="text-white text-sm leading-relaxed min-h-20">
                  <span data-translate="aiAnalyzing">Analyzing your trading strategy...</span>
                </div>
              </div>
              <div class="mt-3 text-xs text-white text-opacity-70 text-center" data-translate="aiPowered">Powered by DeepSeek AI</div>
            </div>
          </div>
        </div>

        <div id="tradeList" class="mt-6 hidden">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-base font-medium text-primary" data-translate="tradeHistory">Trade History</h3>
            <div class="text-xs text-secondary card px-2 py-1 rounded" data-translate="compoundInterest">Compound Interest Applied</div>
          </div>
          <div class="card rounded-lg p-3 max-h-80 overflow-y-auto">
            <div class="overflow-x-auto">
              <table class="w-full text-sm">
                <thead>
                  <tr class="border-b border-gray-200">
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="tradeNumber">Trade #</th>
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="type">Type</th>
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="entryBalance">Entry Balance</th>
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="exitBalance">Exit Balance</th>
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="pl">P&L</th>
                    <th class="text-left py-2 px-2 font-medium text-primary text-xs" data-translate="plPercent">P&L %</th>
                  </tr>
                </thead>
                <tbody id="tradesContainer"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="leverageSection" class="max-w-4xl mx-auto hidden">
      <div class="card rounded-lg p-6">
        <h2 class="text-lg font-medium text-primary mb-6 text-center" data-translate="leverageTitle">Leverage Calculator</h2>
        <div class="grid md:grid-cols-2 gap-6">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="positionType">Position Type</label>
              <div class="grid grid-cols-2 gap-2">
                <button id="longBtn" class="btn btn-position long" data-translate="long">üìà LONG</button>
                <button id="shortBtn" class="btn btn-position inactive" data-translate="short">üìâ SHORT</button>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="leverage">Leverage</label>
              <div class="relative">
                <input type="range" id="leverageSlider" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" min="1" max="100" value="10" step="1" />
                <div class="flex justify-between text-xs text-secondary mt-1">
                  <span>1x</span>
                  <span id="leverageDisplay" class="font-medium text-info">10x</span>
                  <span>100x</span>
                </div>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="entryPrice">Entry Price (USD)</label>
              <input type="number" id="entryPrice" class="w-full px-3 py-2 input rounded-lg" placeholder="50000" value="50000" step="0.01" />
            </div>

            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="quantity">Quantity</label>
              <input type="number" id="quantity" class="w-full px-3 py-2 input rounded-lg" placeholder="0.1" value="0.1" step="0.00000001" />
            </div>

            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="balance">Balance (USD)</label>
              <input type="number" id="balance" class="w-full px-3 py-2 input rounded-lg" placeholder="10000" value="10000" />
            </div>

            <div>
              <label class="block text-sm font-medium text-primary mb-2" data-translate="balanceUsage">Balance Usage (%)</label>
              <div class="relative">
                <input type="range" id="balancePercentage" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" min="1" max="100" value="10" step="1" />
                <div class="flex justify-between text-xs text-secondary mt-1">
                  <span>1%</span>
                  <span id="percentageDisplay" class="font-medium text-info">10%</span>
                  <span>100%</span>
                </div>
              </div>
              <div class="mt-2 p-2 bg-info-light rounded border">
                <div class="text-sm text-primary font-medium"><span data-translate="positionSize">Position Size:</span> <span id="positionSizeDisplay" class="text-info font-medium">$1,000.00</span></div>
              </div>
            </div>

            <button id="calculateLeverage" class="btn btn-primary w-full" data-translate="calculatePosition">Calculate Position</button>
          </div>

          <div id="leverageResults" class="card rounded-lg p-4 hidden">
            <h3 class="text-base font-medium text-primary mb-4 text-center" data-translate="positionAnalysis">Position Analysis</h3>
            <div class="space-y-2">
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="positionType">Position Type:</span>
                <span id="positionTypeResult" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="leverage">Leverage:</span>
                <span id="leverageResult" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="positionSize">Position Size:</span>
                <span id="positionSizeResult" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="quantity">Quantity:</span>
                <span id="quantityResult" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="usedBalance">Used Balance:</span>
                <span id="usedBalanceResult" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="liquidationPrice">Liquidation Price:</span>
                <span id="liquidationPrice" class="font-medium">-</span>
              </div>
              <div class="flex justify-between items-center p-2 bg-info-light rounded border">
                <span class="text-primary font-medium text-sm" data-translate="totalBalance">Total Balance:</span>
                <span id="finalBalanceResult" class="font-medium text-info">-</span>
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="stopPrice">Stop Price (USD):</span>
                <input id="stopPrice" type="number" class="w-40 px-2 py-1 input rounded-lg" placeholder="48000" step="0.01" />
              </div>
              <div class="flex justify-between items-center p-2 card rounded border">
                <span class="text-secondary text-sm" data-translate="optimalLeverage">Optimal Leverage:</span>
                <span id="optimalLeverage" class="font-medium">-</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="./js/translations.js"></script>
  <script src="./js/main.js"></script>
</body>
</html>
